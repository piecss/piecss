///
/// Copyright (C) 2014 Babs GÃ¶sgens. All rights reserved.
/// Licensed under MIT; see LICENSE.txt
///

@include test-module("Layout") {

  $a: 1/2;
  $b: 2/4;
  $c: "1/2";
  $d: "2/4";

  $gutter-width: 24px;

  $grids: (
    $gt-small-handheld: (
      debug-color: $orange, // #ffa500
      columns: 6,
      rhythm: $rhythm,
      gutter-width: $gutter-width,
      layouts: ()
    ),
    $gt-medium-handheld: (
      debug-color: $cyan, // #0ff
      columns: 9,
      rhythm: $rhythm,
      gutter-width: $gutter-width,
      layouts: ()
    ),
    $gt-small-desktop: (
      debug-color: $becca, // #639
      columns: 12,
      rhythm: $rhythm,
      gutter-width: $gutter-width,
      layouts: ()
    )
  );

  @include test("[function] fraction-to-text() | Convert fraction to text") {

    $ra: fraction-to-text($a);
    $rb: fraction-to-text($b);
    $rc: fraction-to-text($c);
    $rd: fraction-to-text($d);

    @include assert-true( $ra=="half", "#{$a} should be named half" );
    @include assert-true( $rb=="half", "#{$b} should be named half" );
    @include assert-true( $rc=="full", "#{$c} should be named full" );
    @include assert-false( $rd=="half", "#{$d} should be named full" );
  }

  @include test("[function] fraction-to-percentage() | Convert fraction to percentage") {

    $ra: fraction-to-percentage($a);
    $rb: fraction-to-percentage($b);

    @include assert-true( $ra==50%, "#{$a} should be 50%" );
    @include assert-true( $rb==50%, "#{$b} should be 50%" );
  }

  @include test("[function] gutter() | Calculate value based on $gutter-width") {

    @include assert-equal( gutter(1), 24px, "Should be 24px" );
    @include assert-equal( gutter(1/2), 12px, "Should be 12px" );
    @include assert-equal( gutter(-1), -24px, "Should be -24px" );
    @include assert-equal( gutter(-1/2), -12px, "Should be -12px" );
    @include assert-equal( gutter(2), 48px, "Should be 48px" );
  }

  @include test("[function] get-grid() | Get a grid map for a breakpoint") {

    $grid1: get-grid($gt-small-handheld);
    $grid2: get-grid($gt-medium-handheld);
    $grid3: get-grid($gt-small-desktop);

    // Test if we have retrieved the right grid by testing its `debug-color` properties
    @include assert-equal( get-grid-property($grid1, 'debug-color'), $orange, "`debug-color` should be #{$orange}" );
    @include assert-equal( get-grid-property($grid2, 'debug-color'), $cyan, "`debug-color` should be #{$cyan}" );
    @include assert-equal( get-grid-property($grid3, 'debug-color'), $becca, "`debug-color` should be #{$becca}" );
  }

  @include test("[function] get-grid-property() | Get a property from a grid map") {

    $grid1: get-grid($gt-small-handheld);
    $grid2: get-grid($gt-medium-handheld);
    $grid3: get-grid($gt-small-desktop);

    @include assert-equal( get-grid-property($grid1, 'debug-color'), $orange, "`debug-color` should be #{$orange}" );
    @include assert-equal( get-grid-property($grid2, 'gutter-width'), $gutter-width, "`gutter-width` should be #{$gutter-width}" );
    @include assert-equal( get-grid-property($grid3,'rhythm'), $rhythm, "`rhythm` should be #{$rhythm}" );
  }

  @include test("[function] get-grid-columns() | Get the value of property `column` from a grid map") {

    $grid1: get-grid($gt-small-handheld);
    $grid2: get-grid($gt-medium-handheld);
    $grid3: get-grid($gt-small-desktop);

    @include assert-equal( get-grid-columns($grid1), 6, "`columns` should be 6" );
    @include assert-equal( get-grid-columns($grid2), 9, "`columns` should be 9" );
    @include assert-equal( get-grid-columns($grid3), 12, "`columns` should be 12" );
  }

  @include test("[function] get-grid-gutter-width() | Get the value of property `gutter-width` from a grid map") {

    $grid1: get-grid($gt-small-handheld);
    $grid2: get-grid($gt-medium-handheld);
    $grid3: get-grid($gt-small-desktop);

    @include assert-equal( get-grid-gutter-width($grid3), $gutter-width, "`gutter-width` should be #{$gutter-width}" );
  }

  @include test("[function] get-grid-rhythm() | Get the value of property `rhythm` from a grid map") {

    $grid1: get-grid($gt-small-handheld);
    $grid2: get-grid($gt-medium-handheld);
    $grid3: get-grid($gt-small-desktop);

    @include assert-equal( get-grid-rhythm($grid3), $rhythm, "`grhythm` should be #{$rhythm}" );
  }

  @include test("[function] get-grid-debug-color() | Get the value of property `debug-color` from a grid map") {

    $grid1: get-grid($gt-small-handheld);
    $grid2: get-grid($gt-medium-handheld);
    $grid3: get-grid($gt-small-desktop);

    @include assert-equal( get-grid-debug-color($grid1), $orange, "`debug-color` should be #{$orange}" );
    @include assert-equal( get-grid-debug-color($grid2), $cyan, "`debug-color` should be #{$cyan}" );
    @include assert-equal( get-grid-debug-color($grid3), $becca, "`debug-color` should be #{$becca}" );
  }
}
